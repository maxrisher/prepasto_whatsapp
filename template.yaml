AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: >
  prepasto-whatsapp-sam-app

  Sample SAM Template for prepasto-whatsapp-sam-app

Resources:
  ProcessMessageFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: lambda_functions/process_message_lambda/
      Handler: lambda_function.lambda_handler
      Runtime: python3.12
      Timeout: 60      # Number of seconds before the lambda times out
      AutoPublishAlias: stagingAlias # This is the default alias that will be associated with the function when we do a 'sam deploy'

  ProductionProcessMessageAlias:
    Type: AWS::Lambda::Alias
    Properties:
      FunctionName: !Ref ProcessMessageFunction #This points to the lambda function as our reference
      FunctionVersion: 1
      Name: production

Outputs:
  LambdaFunction:
    Description: "Lambda Function ARN"
    Value: !GetAtt ProcessMessageFunction.Arn
